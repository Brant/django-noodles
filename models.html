<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="chrome=1">
		<title>Abstract Models | Noodles for Django by Brant</title>

		<link rel="stylesheet" href="stylesheets/styles.css">
		<link rel="stylesheet" href="stylesheets/pygment_trac.css">
		<script src="javascripts/scale.fix.js"></script>
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
		<!--[if lt IE 9]>
		<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
	</head>
	<body>
		<div class="wrapper">
			<header>
				<h1 class="header"><a href="index.html">Noodles for Django</a></h1>
				<p class="header">Half-baked noodles of ideas for little bits of Django functionality</p>

				<ul>
					<li><a class="buttons github" href="https://github.com/Brant/django-noodles">View On GitHub</a></li>
					<li class="download"><a class="buttons" href="https://github.com/Brant/django-noodles/zipball/master">Download ZIP</a></li>
					<li class="download"><a class="buttons" href="https://github.com/Brant/django-noodles/tarball/master">Download TAR</a></li>
				</ul>

				<p class="header">This project is maintained by <a class="header name" href="https://github.com/Brant">Brant</a></p>


			</header>

			<section>
      	<ul class="nav">
      		<li><a href="index.html">Intro &amp; Installation</a></li>
	        	<li><a href="models.html">Abstract Models</a></li>
	        	<li><a href="assets.html">Assets from Images</a></li>
	        	<li><a href="contact.html">Contact Submissions</a></li>
	        	<li><a href="metadata.html">Site Metadata</a></li>
			</ul>

<h1>
<a name="abstract-models" class="anchor" href="#abstract-models"><span class="octicon octicon-link"></span></a>Abstract Models</h1>

<p>Each abstract model is essentially named exactly to match the fields it will give you. For example, "TitleDateSlug" will give you title, date, and slug fields. </p>

<p>Your models can just inherit from these models to save yourself some typing.</p>

<h2>
<a name="littleslugger" class="anchor" href="#littleslugger"><span class="octicon octicon-link"></span></a>LittleSlugger</h2>

<p>LittleSlugger allows you to designate a field on your model to be "slugified". It provides some additional calculations to prevent conflicting slugs, so you can query reliably on the slug field.</p>

<p>In order to implement, you need to create a method for your model named "get_slug_target". It should return the name of the field you want to slugify, as a string.</p>

<div class="highlight highlight-python">
<pre>
<span class="kn">from</span> <span class="nn">noodles.models</span> <span class="kn">import</span> <span class="n">LittleSlugger</span>

<span class="k">class</span> <span class="nc">MySluggedModel</span><span class="p">(</span><span class="n">LittleSlugger</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_slug_target</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">"title"</span>
</pre></div>

<p>Not adding the "get_slug_target" method to your model will raise NotImplementedError.</p>

<p>Little Slugger will look for another object of the same model type with a matching slug. If it finds one, it will append a number (in sequence) to the end of the slug.</p>

<p>For example, if you had an entry with a title of "A good day", it would have a slug of "a-good-day". If you then made <em>another</em> entry titled "A good day", it would end up with a slug of "a-good-day-1". If a third entry with the same title was created, it would become "a-good-day-2". This allows reliably querying on slugs, as if they would always be unique.</p>

<p>Another default behavior of LittleSlugger is to keep the slug, once it has been established, even if the sluggified field should change. This allows, for example, title changes on blog posts without changing the URL of that post.</p>

<p>For example, if you titled a post "A good days" and published it, you might have a URL of "<a href="http://myblog.com/a-good-days/">http://myblog.com/a-good-days/</a>". Realizing it should be titled "A good day", you would change the title. However, the slug would stay the same, keeping any pointers to the URL the same as well.</p>

<p>To disable this behavior, you simply need to make a small addition to the "get_slug_target" method.</p>

<div class="highlight highlight-python"><pre><span class="kn">from</span> <span class="nn">noodles.models</span> <span class="kn">import</span> <span class="n">LittleSlugger</span>

<span class="k">class</span> <span class="nc">MySluggedModel</span><span class="p">(</span><span class="n">LittleSlugger</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_slug_target</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="s">"title"</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
</pre></div>

<p>The second variable returned in the tuple designates whether or not the slug should "persist" through field changes.</p>


<h2>
<a name="nameslug" class="anchor" href="#nameslug"><span class="octicon octicon-link"></span></a>NameSlug</h2>

<p>NameSlug is a subclass of LittleSlugger, which has a "name" attribute. That name attribute is what the slug will be built from.</p>



<h2>
<a name="nameslugactive" class="anchor" href="#nameslugactive"><span class="octicon octicon-link"></span></a>NameSlugActive</h2>

<p>NameSlugActive is a subclass of NameSlug (which is a subclass of LittleSlugger). In addition to a name and a slug of that name, there is an "active" attribute (BooleanField that defaults to True). </p>

<p><strong>Note:</strong> The 'active' attribute is <em>not</em> a toggler (like ActiveToggler's active field).</p>

<h2>
<a name="titledateslug" class="anchor" href="#titledateslug"><span class="octicon octicon-link"></span></a>TitleDateSlug</h2>

<p>TitleDateSlug is a subclass of LittleSlugger. It's attributes are 'title', 'date', and 'slug'. Slug is derived from the title. </p>

<p>The date attribute could be used as something like a publish date. If left blank at save, it will auto populate to 5 days in the future.</p>


<h2>
<a name="activetoggler" class="anchor" href="#activetoggler"><span class="octicon octicon-link"></span></a>ActiveToggler</h2>

<p>Active Toggler lets you toggle 1 entry of the model to be considered "active". Only 1 entry can be active at a time. </p>

<p>Active Toggler adds an "active" attribute to your model. When an object of the model is saved (by calling .save()) and set to active=True, it will run through all other entries for the model and set them all to active=False.</p>

<div class="highlight highlight-python"><pre><span class="kn">from</span> <span class="nn">noodles.models</span> <span class="kn">import</span> <span class="n">ActiveToggler</span>

<span class="k">class</span> <span class="nc">FavoriteIcecream</span><span class="p">(</span><span class="n">ActiveToggler</span><span class="p">):</span>
    <span class="sd">""" You can only have 1 favorite at a time """</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
</pre></div>

<p>You could then use the model to query as if "active" was a unique field.</p>

<div class="highlight highlight-python"><pre><span class="n">current_favorite_icecream</span> <span class="o">=</span> <span class="n">FavoriteIcecream</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">active</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>


			</section>
			<footer>
				<p><small>Hosted on <a href="http://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
			</footer>
		</div>
		<!--[if !IE]><script>fixScale(document);</script><![endif]-->

	</body>
</html>
